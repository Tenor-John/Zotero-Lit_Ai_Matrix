# Zotero Lit AI Matrix

面向科研阅读的 Zotero 智能文献矩阵插件。  
它把文献元数据（标题、作者、期刊、年份、标签）与 AI 结构化笔记自动整合成可筛选、可排序、可导出的矩阵视图。

## 核心特色

- 智能文献矩阵视图
  - 在 Zotero 内嵌页面中展示文献矩阵，不需要额外软件。
  - 支持多列展示：基础元数据 + AI 字段。
- AI 笔记自动解析
  - 从文献 note 中提取结构化字段，自动写入矩阵缓存。
  - 适配你常用的 Zotero GPT / AI 生成笔记流程。
- 热图分析
  - GitHub 风格年度热图，显示每日使用频率。
  - 点击某一天即可过滤矩阵为“当天文献”，再次点击取消过滤。
- 一键跳转阅读
  - 矩阵标题可直接跳转到 PDF 阅读器。
- 实用工具
  - 全库重建缓存、批量更新阅读状态、CSV/Markdown 导出。

## 安装方式

### 方式 1：正式版（推荐）

1. 打开 GitHub Releases 页面，下载最新 `.xpi`。
2. Zotero -> `工具` -> `插件` -> 右上角齿轮 -> `Install Plugin From File...`。
3. 选择 `.xpi` 安装并重启 Zotero。

仓库地址：<https://github.com/Tenor-John/Zotero-Lit_Ai_Matrix>

### 方式 2：开发模式

```bash
npm install
npm start
```

> 需要在 `.env` 中正确配置 `ZOTERO_PLUGIN_ZOTERO_BIN_PATH` 和 `ZOTERO_PLUGIN_PROFILE_PATH`。

## 使用教程

### 1. 打开矩阵页面

你可以通过以下任一入口打开：

- 工具栏 AI Matrix 图标
- 文件菜单中的矩阵页面入口

### 2. 生成可解析的 AI Note

建议每篇文献至少包含以下结构化字段（可由 Zotero GPT 生成）：

- `领域基础知识::`
- `研究背景::`
- `作者的问题意识::`
- `研究意义::`
- `研究结论::`
- `未来研究方向提及::`
- `未来研究方向思考::`

每个字段单独成行，使用 `::` 分隔。

### 3. 更新矩阵缓存

- 单篇或多篇：在文献条目右键菜单执行“重建智能文献矩阵缓存”
- 全库：在文件菜单执行“重建全库智能文献矩阵缓存”

### 4. 在矩阵中检索与分析

- 顶部支持按关键词、阅读状态、年份、期刊、标签筛选。
- 支持列头排序。
- 点击文献标题直接打开 PDF（无 PDF 时定位条目）。

### 5. 使用热图定位当天笔记

- 点击热图某个有数据的小方块：矩阵仅显示该天文献。
- 再点同一方块：恢复全部数据。

## 与 Zotero GPT 协同建议

推荐流程：

1. 选中文献 -> 用 Zotero GPT 生成结构化总结 Note。
2. 确保字段名与上面 7 个字段一致。
3. 执行“重建缓存”。
4. 在矩阵中完成筛选、对比、导出。

## 常见问题

### Q1：矩阵列标题不显示

- 先确认已安装最新版本。
- 打开矩阵页面，查看右上角 `UI:xxxx` 版本号是否为最新。
- 若不是，说明仍在使用旧包，请重新安装最新 `.xpi` 并重启 Zotero。

### Q2：热图月份或悬浮提示异常

- 升级到最新版本后会修复。
- 若仍异常，执行一次“重建全库缓存”并刷新矩阵页面。

### Q3：`npm start` 报 Zotero binary not found

请检查 `.env`：

- `ZOTERO_PLUGIN_ZOTERO_BIN_PATH` 指向 Zotero 可执行文件
- `ZOTERO_PLUGIN_PROFILE_PATH` 指向 Zotero profile 目录

## 数据与隐私

- 插件主要使用 Zotero 本地条目与 note 数据。
- 不会主动上传你的文献库内容。
- 是否调用第三方 AI 服务取决于你使用的 GPT 插件配置。

## 开发与发布

```bash
npm run build
npm run release
```

建议发布流程：

1. 在功能分支完成开发与测试。
2. 提交 PR 合并到 `main`。
3. 使用语义化版本发布（如 `v0.1.5`）。

## 许可证

AGPL-3.0-or-later

## 作者

Tenor-John
